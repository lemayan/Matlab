{% extends 'starter-page.html'%}
{% load static %}
{% block body %}
<div class="container" data-aos="fade-up" data-aos-delay="100">
    <form method="POST" action="{% url 'update' appointment.id %}">
      {% csrf_token %}
      <div class="row">
        <div class="col-md-4 form-group">
          <label for="name" class="form-label">Your Name</label>
          <input type="text" name="name" class="form-control" id="name" placeholder="Your Name" value="{{ appointment.name }}" required>
          <div class="invalid-feedback">
            Please enter your name.
          </div>
        </div>
        <div class="col-md-4 form-group mt-3 mt-md-0">
          <label for="email" class="form-label">Your Email</label>
          <input type="email" class="form-control" name="email" id="email" placeholder="Your Email" value="{{ appointment.email }}" required>
          <div class="invalid-feedback">
            Please enter a valid email address.
          </div>
        </div>
        <div class="col-md-4 form-group mt-3 mt-md-0">
          <label for="phone" class="form-label">Your Phone</label>
          <input type="tel" class="form-control" name="phone" id="phone" placeholder="Your Phone" value="{{ appointment.phone }}" required>
          <div class="invalid-feedback">
            Please enter your phone number.
          </div>
        </div>
      </div>
      <div class="row mt-3">
        <div class="col-md-4 form-group">
          <label for="date" class="form-label">Appointment Date</label>
          <input type="datetime-local" name="date" class="form-control" id="date" placeholder="Appointment Date" value="{{ appointment.date|date:'Y-m-d\TH:i' }}" required>
          <div class="invalid-feedback">
            Please select a date and time.
          </div>
        </div>
        <div class="col-md-4 form-group">
          <label for="department" class="form-label">Department</label>
          <select name="department" id="department" class="form-select" required>
            <option value="">Select Department</option>
            <option value="Department 1" {% if appointment.department == "Department 1" %}selected{% endif %}>Department 1</option>
            <option value="Department 2" {% if appointment.department == "Department 2" %}selected{% endif %}>Department 2</option>
            <option value="Department 3" {% if appointment.department == "Department 3" %}selected{% endif %}>Department 3</option>
          </select>
          <div class="invalid-feedback">
            Please select a department.
          </div>
        </div>
        <div class="col-md-4 form-group">
          <label for="doctor" class="form-label">Doctor</label>
          <select name="doctor" id="doctor" class="form-select" required>
            <option value="">Select Doctor</option>
            <option value="Doctor 1" {% if appointment.doctor == "Doctor 1" %}selected{% endif %}>Doctor 1</option>
            <option value="Doctor 2" {% if appointment.doctor == "Doctor 2" %}selected{% endif %}>Doctor 2</option>
            <option value="Doctor 3" {% if appointment.doctor == "Doctor 3" %}selected{% endif %}>Doctor 3</option>
          </select>
          <div class="invalid-feedback">
            Please select a doctor.
          </div>
        </div>
      </div>
      <div class="form-group mt-3">
        <label for="message" class="form-label">Message (Optional)</label>
        <textarea class="form-control" name="message" id="message" rows="5" placeholder="Message (Optional)">{{ appointment.message }}</textarea>
      </div>
      <div class="mt-3">
        <div class="loading">Loading</div>
        <div class="error-message"></div>
        <div class="sent-message">Your appointment request has been updated successfully. Thank you!</div>
        <div class="text-center mt-4">
          <button type="submit" class="btn btn-primary btn-lg">Update Appointment</button>
        </div>
      </div>
    </form>
</div>
{% endblock %}
